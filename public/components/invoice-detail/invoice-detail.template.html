<h2>View Invoice</h2>

<div>
	<label>Created on: </label>
	<p>{{$ctrl.Invoice.createdDate}}</p>
</div>

<div>
	<label>Service date: </label>
	<p>{{$ctrl.Invoice.serviceDate}}</p>
</div>

<div>
	<label>Vendor: </label>
	<p>{{$ctrl.vendor}}</p>
</div>

<div>
	<label>Invoice #: </label>
	<p>{{$ctrl.Invoice.invNum}}</p>
</div>

<div>
	<label>Memo: </label>
	<p>{{$ctrl.Invoice.memo}}</p>
</div>

<div>
	<label>Line Items:</label>
	<table class="table table-hover">
		<thead>
			<tr>
				<th>Category</th>
				<th>Details</th>
				<th>Amount</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="lineItem in $ctrl.Invoice.lineItems">
				<td>{{lineItem.category}}</td>
				<td>{{lineItem.hood}} {{lineItem.subHoods.join(', ')}} {{lineItem.expense}}</td>
				<td>${{lineItem.amount}}</td>
			</tr>
			<tr>
				<td><b>Total:</b></td>
				<td></td>
				<td>${{$ctrl.total}}</td>
			</tr>
		</tbody>
	</table>
</div>

<div>
	<label>Invoice history:</label>
	<table class="table table-hover">
		<thead>
			<tr>
				<th>Date</th>
				<th>Action</th>
				<th>User</th>
				<th>Changes</th>
				<th>Comment</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="action in $ctrl.Invoice.actions">
				<td>{{action.date}}</td>
				<td>{{action.category}}</td>
				<td>{{action.user}}</td>
				<td>{{action.changes}}</td>
				<td>{{action.comment}}</td>
			</tr>
		</tbody>
	</table>
</div>

<div ng-if="$ctrl.User.invoiceQueue.indexOf($ctrl.invoice_id) != -1"> <!-- Work around because 'in' syntax not recognized in angular directive-->
	<h3>What would you like to do?</h3>

	<div>
		<label>Leave a comment:</label>
		<textarea rows="4" cols="50" ng-model="$ctrl.newAction.comment"></textarea>
	</div>

	<button>Hold</button>
	<button>Send to next user</button>
</div>

<!-- TODO: user logic. this is where who can do what actions matters -->


